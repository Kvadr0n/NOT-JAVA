version: '3'
services:
    db:
        image: mysql:latest
        command: --default-authentication-plugin=mysql_native_password
        environment:
            MYSQL_ROOT_PASSWORD: Franklin5
        volumes:
        - "./initdb/:/docker-entrypoint-initdb.d"
        - db_volume:/var/lib/mysql
    apache:
        build: apachedir
        volumes:
        - "./apachedir/:/var/www/html"
        ports:
        - 81:80
        - 443:443
    nginx:
        build: nginxdir
        volumes:
        - "./apachedir/:/var/www/html"
        - "./nginxdir/images:/data/images"
        ports:
        - 80:80
        environment:
        - NGINX_PORT=80
volumes:
    db_volume: